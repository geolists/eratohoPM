;===========================================================================
;住み込み労働(上級職)の基礎処理
;===========================================================================
;上級職リスト
;1.寺小屋
;2.天女の社

;以下構想のみ(いくつかボツになる予定です)
;3.ヒルメの蔵(巫女+花嫁)
;4.悪魔の館(メイド+ゴスロリ)
;5.鏡面の社(穢れを受けすぎて余命幾ばくもない者が来る場所)
;6.榊の安住地(アライメントが高い花嫁しか来れない。つづらの里(未実装)でCPを200溜めると来る事ができる)
;---------------------------------------------------
;上級職判定
;上級職になれるかどうか判定する式中関数です
;ARG　　対象のキャラ番号
;ARG:1　参照する職業。-1の場合は数を見る
;
;---------------------------------------------------
@CAN_METAWORK, ARG, ARG:1
#FUNCTION
#DIM L_LOCAL, 1

VARSET LOCAL, 0
FOR L_LOCAL, 21, 27
	;寺小屋は知力経験160以上＆疎通経験70以上
	IF ARG:1 < 0 || (ARG:1 == 21 && EXP:(ARG):知力経験 >= 160 && EXP:(ARG):疎通経験 >= 70)
		LOCAL += 1
	;天女の社は美麗経験140以上＆疎通経験50以上
	ELSEIF ARG:1 < 0 || (ARG:1 == 22 && EXP:(ARG):美麗経験 >= 140 && EXP:(ARG):疎通経験 >= 50)
		LOCAL += 1
	ENDIF
NEXT


RETURNF LOCAL

;-----------------------------------------------------
;上級職　職業名出力関数
;-----------------------------------------------------
@NAME_METAWORK, ARG
#FUNCTIONS
#LOCALSSIZE 6
SIF LOCALS == ""
	SPLIT "寺小屋_天女の社_ヒルメの蔵_悪魔の館_鏡面の社_榊の安住地", "_", LOCALS
RETURNF LOCALS:ARG

;-----------------------------------------------------
;上級職　職業名→数値
;現時点では使い道がない
;-----------------------------------------------------
@NAME_METAWORK_REV, ARGS
#FUNCTION

SELECTCASE ARGS
	CASE "寺子屋"
		LOCAL = 1
	CASE "天女の社"
		LOCAL = 2
	CASE "ヒルメの蔵"
		LOCAL = 3
	CASE "悪魔の館"
		LOCAL = 4
	CASE "鏡面の社"
		LOCAL = 5
	CASE "榊の安住地"
		LOCAL = 6
ENDSELECT

RETURNF LOCAL


;-----------------------------------------------------
;上級職　客の名前表示関数(式中関数)
;-----------------------------------------------------
@CLIENTNAME, ARG
#FUNCTIONS
#LOCALSSIZE 2
SIF LOCALS == ""
	SPLIT "生徒_観客", "_", LOCALS
RETURNF LOCALS:ARG




